<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>TapQuest â€“ Reinos de TON</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body {
  margin:0;
  font-family:'Trebuchet MS',sans-serif;
  background:radial-gradient(circle at top,#1e3c72,#2a5298);
  color:#fff;
  text-align:center;
}
h1 {
  margin:15px 0;
  font-size:32px;
  text-shadow:0 3px 10px #000;
}
.card {
  background:linear-gradient(180deg,#141e30,#243b55);
  margin:16px;
  padding:20px;
  border-radius:22px;
  box-shadow:0 10px 25px rgba(0,0,0,.6);
  animation:fadeIn .4s ease;
}
button {
  width:92%;
  max-width:340px;
  padding:16px;
  margin:10px auto;
  display:block;
  font-size:18px;
  border-radius:18px;
  border:none;
  cursor:pointer;
  background:linear-gradient(180deg,#f5af19,#f12711);
  color:#000;
  font-weight:bold;
  box-shadow:0 4px 12px rgba(0,0,0,.6);
}
button:active { transform:scale(.95); }
button:disabled { background:#555;color:#aaa; }
.tap {
  font-size:24px;
  background:linear-gradient(180deg,#00f260,#0575e6);
  color:#fff;
}
.back {
  background:linear-gradient(180deg,#434343,#000);
  color:#fff;
}
.hidden { display:none; }

.bar {
  width:100%;
  height:16px;
  background:#222;
  border-radius:10px;
  overflow:hidden;
  margin-bottom:12px;
}
.fill {
  height:100%;
  transition:width .3s;
}
.energy { background:linear-gradient(90deg,#00ff87,#60efff); }
.xp { background:linear-gradient(90deg,#ff512f,#dd2476); }

.hit { animation:hit .15s; }
@keyframes hit {
  0%{transform:translateX(0)}
  25%{transform:translateX(-4px)}
  50%{transform:translateX(4px)}
  100%{transform:translateX(0)}
}
@keyframes fadeIn {
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1;transform:translateY(0)}
}
</style>
</head>

<body>

<h1>âš”ï¸ TapQuest</h1>

<!-- MAPA -->
<div class="card" id="map">
  <h2>ğŸ—ºï¸ Mapa del Mundo</h2>
  <p>ğŸ§¬ Nivel: <span id="level">1</span></p>
  <p>â­ XP: <span id="xp">0</span></p>

  <button onclick="enterZone(1)">ğŸŒ² Bosque Inicial</button>
  <button id="zone2" onclick="enterZone(2)" disabled>ğŸœï¸ Desierto (Nivel 3)</button>
  <button id="zone3" onclick="enterZone(3)" disabled>ğŸ”ï¸ MontaÃ±as (Nivel 5)</button>
</div>

<!-- ZONA -->
<div class="card hidden" id="zone">
  <h2 id="zoneName"></h2>

  <p>ğŸª™ Oro: <span id="gold">0</span></p>

  <p>ğŸ”‹ EnergÃ­a</p>
  <div class="bar"><div id="energyBar" class="fill energy"></div></div>

  <p>â­ XP</p>
  <div class="bar"><div id="xpBar" class="fill xp"></div></div>

  <p>ğŸ‘¹ Enemigo HP: <span id="enemy">0</span></p>

  <button class="tap" onclick="tap()">âš”ï¸ ATACAR</button>
  <button onclick="openInventory()">ğŸ’ Inventario</button>
  <button class="back" onclick="back()">â¬…ï¸ Volver</button>
</div>

<!-- INVENTARIO -->
<div class="card hidden" id="inventory">
  <h2>ğŸ’ Inventario</h2>

  <p>ğŸ—¡ï¸ Espadas: <span id="swords">0</span></p>
  <button onclick="useSword()">Usar espada</button>

  <p>ğŸ§ª Pociones: <span id="potions">0</span></p>
  <button onclick="usePotion()">Usar pociÃ³n</button>

  <button class="back" onclick="closeInventory()">â¬…ï¸ Volver</button>
</div>

<!-- SONIDOS -->
<audio id="sndHit" src="https://actions.google.com/sounds/v1/impacts/wood_plank_flicks.ogg"></audio>
<audio id="sndLevel" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
<audio id="sndItem" src="https://actions.google.com/sounds/v1/cartoon/pop.ogg"></audio>

<script>
// ===== UTIL =====
function playSound(id){
  const s=document.getElementById(id);
  if(!s)return;
  s.currentTime=0;
  s.play();
}
function vibrate(ms=30){
  if(window.Telegram && Telegram.WebApp.HapticFeedback){
    Telegram.WebApp.HapticFeedback.impactOccurred("light");
  } else if(navigator.vibrate){
    navigator.vibrate(ms);
  }
}

// ===== ESTADO =====
let gold=0, energy=100, level=1, xp=0, damage=1;
let inventory={swords:0,potions:0};

const zones={
  1:{name:"ğŸŒ² Bosque Inicial",hp:5,xp:5,gold:2},
  2:{name:"ğŸœï¸ Desierto Antiguo",hp:10,xp:10,gold:4},
  3:{name:"ğŸ”ï¸ MontaÃ±as Heladas",hp:20,xp:20,gold:8}
};
let currentZone=1;
let enemyHP=zones[1].hp;

// ===== MAPA =====
function enterZone(z){
  currentZone=z;
  enemyHP=zones[z].hp;
  document.getElementById("map").classList.add("hidden");
  document.getElementById("zone").classList.remove("hidden");
  document.getElementById("zoneName").innerText=zones[z].name;
  updateUI();
}
function back(){
  document.getElementById("zone").classList.add("hidden");
  document.getElementById("map").classList.remove("hidden");
}

// ===== COMBATE =====
function tap(){
  if(energy<=0)return;

  playSound("sndHit");
  vibrate(20);

  document.getElementById("zone").classList.add("hit");
  setTimeout(()=>document.getElementById("zone").classList.remove("hit"),150);

  energy--;
  enemyHP-=damage;

  if(enemyHP<=0){
    enemyHP=zones[currentZone].hp;
    gold+=zones[currentZone].gold;
    xp+=zones[currentZone].xp;

    if(Math.random()<0.3)inventory.potions++;
    if(Math.random()<0.2)inventory.swords++;

    checkLevelUp();
  }
  updateUI();
}

// ===== NIVEL =====
function checkLevelUp(){
  let need=level*30;
  if(xp>=need){
    xp-=need;
    level++;
    playSound("sndLevel");
    vibrate(60);
    alert("ğŸ§¬ Subiste a nivel "+level);
    if(level>=3)document.getElementById("zone2").disabled=false;
    if(level>=5)document.getElementById("zone3").disabled=false;
  }
}

// ===== INVENTARIO =====
function openInventory(){
  document.getElementById("zone").classList.add("hidden");
  document.getElementById("inventory").classList.remove("hidden");
  updateInventory();
}
function closeInventory(){
  document.getElementById("inventory").classList.add("hidden");
  document.getElementById("zone").classList.remove("hidden");
}
function useSword(){
  if(inventory.swords<=0)return;
  playSound("sndItem");
  vibrate(40);
  inventory.swords--;
  damage++;
  updateInventory();
}
function usePotion(){
  if(inventory.potions<=0)return;
  playSound("sndItem");
  vibrate(40);
  inventory.potions--;
  energy=Math.min(energy+30,100);
  updateUI();
  updateInventory();
}

// ===== UI =====
function updateUI(){
  document.getElementById("gold").innerText=gold;
  document.getElementById("enemy").innerText=enemyHP;
  document.getElementById("level").innerText=level;
  document.getElementById("xp").innerText=xp;
  document.getElementById("energyBar").style.width=energy+"%";
  let need=level*30;
  document.getElementById("xpBar").style.width=Math.min((xp/need)*100,100)+"%";
}
function updateInventory(){
  document.getElementById("swords").innerText=inventory.swords;
  document.getElementById("potions").innerText=inventory.potions;
}

// ===== IDLE =====
setInterval(()=>{
  if(energy<100){
    energy++;
    updateUI();
  }
},5000);

// ===== TELEGRAM =====
if(window.Telegram){
  Telegram.WebApp.ready();
  Telegram.WebApp.expand();
}
</script>

</body>
</html>  border-radius:18px;
  border:none;
  cursor:pointer;
  background:linear-gradient(180deg,#f5af19,#f12711);
  color:#000;
  font-weight:bold;
  box-shadow:0 4px 12px rgba(0,0,0,.6);
}
button:active {
  transform:scale(.95);
}
button:disabled {
  background:#555;
  color:#aaa;
}
.tap {
  font-size:24px;
  background:linear-gradient(180deg,#00f260,#0575e6);
  color:#fff;
}
.back {
  background:linear-gradient(180deg,#434343,#000);
  color:#fff;
}
.hidden { display:none; }

.bar {
  width:100%;
  height:16px;
  background:#222;
  border-radius:10px;
  overflow:hidden;
  margin-bottom:12px;
}
.fill {
  height:100%;
  transition:width .3s;
}
.energy { background:linear-gradient(90deg,#00ff87,#60efff); }
.xp { background:linear-gradient(90deg,#ff512f,#dd2476); }

.hit { animation:hit .15s; }
@keyframes hit {
  0%{transform:translateX(0)}
  25%{transform:translateX(-4px)}
  50%{transform:translateX(4px)}
  100%{transform:translateX(0)}
}
@keyframes fadeIn {
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1;transform:translateY(0)}
}
</style>
</head>

<body>

<h1>âš”ï¸ TapQuest</h1>

<!-- MAPA -->
<div class="card" id="map">
  <h2>ğŸ—ºï¸ Mapa del Mundo</h2>
  <p>ğŸ§¬ Nivel: <span id="level">1</span></p>
  <p>â­ XP: <span id="xp">0</span></p>

  <button onclick="enterZone(1)">ğŸŒ² Bosque Inicial</button>
  <button id="zone2" onclick="enterZone(2)" disabled>ğŸœï¸ Desierto (Nivel 3)</button>
  <button id="zone3" onclick="enterZone(3)" disabled>ğŸ”ï¸ MontaÃ±as (Nivel 5)</button>
</div>

<!-- ZONA -->
<div class="card hidden" id="zone">
  <h2 id="zoneName"></h2>

  <p>ğŸª™ Oro: <span id="gold">0</span></p>

  <p>ğŸ”‹ EnergÃ­a</p>
  <div class="bar"><div id="energyBar" class="fill energy"></div></div>

  <p>â­ XP</p>
  <div class="bar"><div id="xpBar" class="fill xp"></div></div>

  <p>ğŸ‘¹ Enemigo HP: <span id="enemy">0</span></p>

  <button class="tap" onclick="tap()">âš”ï¸ ATACAR</button>
  <button onclick="openInventory()">ğŸ’ Inventario</button>
  <button class="back" onclick="back()">â¬…ï¸ Volver</button>
</div>

<!-- INVENTARIO -->
<div class="card hidden" id="inventory">
  <h2>ğŸ’ Inventario</h2>

  <p>ğŸ—¡ï¸ Espadas: <span id="swords">0</span></p>
  <button onclick="useSword()">Usar espada</button>

  <p>ğŸ§ª Pociones: <span id="potions">0</span></p>
  <button onclick="usePotion()">Usar pociÃ³n</button>

  <button class="back" onclick="closeInventory()">â¬…ï¸ Volver</button>
</div>

<script>
// ESTADO
let gold=0, energy=100, level=1, xp=0, damage=1;
let inventory={swords:0,potions:0};

const zones={
  1:{name:"ğŸŒ² Bosque Inicial",hp:5,xp:5,gold:2},
  2:{name:"ğŸœï¸ Desierto Antiguo",hp:10,xp:10,gold:4},
  3:{name:"ğŸ”ï¸ MontaÃ±as Heladas",hp:20,xp:20,gold:8}
};
let currentZone=1;
let enemyHP=zones[1].hp;

// MAPA
function enterZone(z){
  currentZone=z;
  enemyHP=zones[z].hp;
  document.getElementById("map").classList.add("hidden");
  document.getElementById("zone").classList.remove("hidden");
  document.getElementById("zoneName").innerText=zones[z].name;
  updateUI();
}
function back(){
  document.getElementById("zone").classList.add("hidden");
  document.getElementById("map").classList.remove("hidden");
}

// COMBATE
function tap(){
  if(energy<=0)return;
  document.getElementById("zone").classList.add("hit");
  setTimeout(()=>document.getElementById("zone").classList.remove("hit"),150);

  energy--;
  enemyHP-=damage;

  if(enemyHP<=0){
    enemyHP=zones[currentZone].hp;
    gold+=zones[currentZone].gold;
    xp+=zones[currentZone].xp;

    if(Math.random()<0.3)inventory.potions++;
    if(Math.random()<0.2)inventory.swords++;

    checkLevelUp();
  }
  updateUI();
}

// NIVEL
function checkLevelUp(){
  let need=level*30;
  if(xp>=need){
    xp-=need;
    level++;
    alert("ğŸ§¬ Subiste a nivel "+level);
    if(level>=3)document.getElementById("zone2").disabled=false;
    if(level>=5)document.getElementById("zone3").disabled=false;
  }
}

// INVENTARIO
function openInventory(){
  document.getElementById("zone").classList.add("hidden");
  document.getElementById("inventory").classList.remove("hidden");
  updateInventory();
}
function closeInventory(){
  document.getElementById("inventory").classList.add("hidden");
  document.getElementById("zone").classList.remove("hidden");
}
function useSword(){
  if(inventory.swords<=0)return;
  inventory.swords--;
  damage++;
  alert("ğŸ—¡ï¸ DaÃ±o aumentado");
  updateInventory();
}
function usePotion(){
  if(inventory.potions<=0)return;
  inventory.potions--;
  energy=Math.min(energy+30,100);
  updateUI();
  updateInventory();
}

// UI
function updateUI(){
  document.getElementById("gold").innerText=gold;
  document.getElementById("enemy").innerText=enemyHP;
  document.getElementById("level").innerText=level;
  document.getElementById("xp").innerText=xp;
  document.getElementById("energyBar").style.width=energy+"%";
  let need=level*30;
  document.getElementById("xpBar").style.width=Math.min((xp/need)*100,100)+"%";
}
function updateInventory(){
  document.getElementById("swords").innerText=inventory.swords;
  document.getElementById("potions").innerText=inventory.potions;
}

// IDLE
setInterval(()=>{
  if(energy<100){
    energy++;
    updateUI();
  }
},5000);

// TELEGRAM
if(window.Telegram){
  Telegram.WebApp.ready();
  Telegram.WebApp.expand();
}
</script>

</body>
</html>    margin: 10px auto;
    display: block;
    font-size: 18px;
    border-radius: 18px;
    border: none;
    cursor: pointer;
    background: linear-gradient(180deg,#f5af19,#f12711);
    color: #000;
    font-weight: bold;
    transition: transform .1s, box-shadow .1s;
    box-shadow: 0 4px 12px rgba(0,0,0,.6);
  }

  button:active {
    transform: scale(.95);
    box-shadow: 0 2px 6px rgba(0,0,0,.8);
  }

  button:disabled {
    background: #555;
    color: #aaa;
    box-shadow: none;
  }

  .tap {
    font-size: 24px;
    background: linear-gradient(180deg,#00f260,#0575e6);
    color: #fff;
  }

  .back {
    background: linear-gradient(180deg,#434343,#000);
    color: #fff;
  }

  .hidden { display: none; }

  /* BARRAS */
  .bar {
    width: 100%;
    height: 16px;
    background: #222;
    border-radius: 10px;
    overflow: hidden;
    margin: 6px 0 12px;
  }

  .fill {
    height: 100%;
    transition: width .3s;
  }

  .energy { background: linear-gradient(90deg,#00ff87,#60efff); }
  .xp { background: linear-gradient(90deg,#ff512f,#dd2476); }

  /* ANIMACIONES */
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .hit {
    animation: hit .15s;
  }

  @keyframes hit {
    0% { transform: translateX(0); }
    25% { transform: translateX(-4px); }
    50% { transform: translateX(4px); }
    100% { transform: translateX(0); }
  }
</style>
</head>

<body>

<h1>âš”ï¸ TapQuest</h1>

<!-- MAPA -->
<div class="card" id="map">
  <h2>ğŸ—ºï¸ Mapa del Mundo</h2>
  <p>ğŸ§¬ Nivel: <span id="level">1</span> | â­ XP: <span id="xp">0</span></p>

  <button onclick="enterZone(1)">ğŸŒ² Bosque Inicial</button>
  <button id="zone2" onclick="enterZone(2)" disabled>ğŸœï¸ Desierto (Nivel 3)</button>
  <button id="zone3" onclick="enterZone(3)" disabled>ğŸ”ï¸ MontaÃ±as (Nivel 5)</button>
</div>

<!-- ZONA -->
<div class="card hidden" id="zone">
  <h2 id="zoneName"></h2>

  <p>ğŸª™ Oro: <span id="gold">0</span></p>
  <p>ğŸ”‹ EnergÃ­a</p>
<div class="bar">
  <div id="energyBar" class="fill energy"></div>
</div>

<p>â­ XP</p>
<div class="bar">
  <div id="xpBar" class="fill xp"></div>
</div>
  <p>â­ XP: <span id="xpZone">0</span></p>

  <p>ğŸ‘¹ Enemigo HP: <span id="enemy">0</span></p>

  <p id="missionText"></p>
  <p id="missionProgress"></p>

  <button class="tap" onclick="tap()">âš”ï¸ ATACAR</button>
  <button onclick="openInventory()">ğŸ’ Inventario</button>
  <button class="back" onclick="back()">â¬…ï¸ Volver</button>
</div>

<!-- INVENTARIO -->
<div class="card hidden" id="inventory">
  <h2>ğŸ’ Inventario</h2>

  <p>ğŸ—¡ï¸ Espadas: <span id="swords">0</span></p>
  <button onclick="useSword()">Usar espada</button>

  <p>ğŸ§ª Pociones: <span id="potions">0</span></p>
  <button onclick="usePotion()">Usar pociÃ³n</button>

  <button class="back" onclick="closeInventory()">â¬…ï¸ Volver</button>
</div>

<script>
/* ===== ESTADO ===== */
let gold = 0;
let energy = 100;
let level = 1;
let xp = 0;
let damage = 1;

/* INVENTARIO */
let inventory = { swords: 0, potions: 0 };

/* ZONAS */
const zones = {
  1: { name: "ğŸŒ² Bosque Inicial", hp: 5, xp: 5, gold: 2 },
  2: { name: "ğŸœï¸ Desierto Antiguo", hp: 10, xp: 10, gold: 4 },
  3: { name: "ğŸ”ï¸ MontaÃ±as Heladas", hp: 20, xp: 20, gold: 8 }
};

let currentZone = 1;
let enemyHP = zones[1].hp;

/* MISIÃ“N */
let mission = {
  goal: 3,
  progress: 0,
  completed: false
};

/* ===== MAPA ===== */
function enterZone(z) {
  currentZone = z;
  enemyHP = zones[z].hp;

  document.getElementById("map").classList.add("hidden");
  document.getElementById("zone").classList.remove("hidden");

  document.getElementById("zoneName").innerText = zones[z].name;
  updateUI();
}

function back() {
  document.getElementById("zone").classList.add("hidden");
  document.getElementById("map").classList.remove("hidden");
}

/* ===== COMBATE ===== */
function tap() {
  document.getElementById("zone").classList.add("hit");
setTimeout(() => {
  document.getElementById("zone").classList.remove("hit");
}, 150);
  if (energy <= 0) return;

  energy--;
  enemyHP -= damage;

  if (enemyHP <= 0) {
    enemyHP = zones[currentZone].hp;
    gold += zones[currentZone].gold;
    xp += zones[currentZone].xp;
    mission.progress++;

    if (Math.random() < 0.3) inventory.potions++;
    if (Math.random() < 0.2) inventory.swords++;

    checkLevelUp();
  }

  updateUI();
}

/* ===== NIVEL ===== */
function checkLevelUp() {
  let need = level * 30;
  if (xp >= need) {
    xp -= need;
    level++;
    alert("ğŸ§¬ Subiste a nivel " + level);

    if (level >= 3) document.getElementById("zone2").disabled = false;
    if (level >= 5) document.getElementById("zone3").disabled = false;
  }
}

/* ===== INVENTARIO ===== */
function openInventory() {
  document.getElementById("zone").classList.add("hidden");
  document.getElementById("inventory").classList.remove("hidden");
  updateInventory();
}
function closeInventory() {
  document.getElementById("inventory").classList.add("hidden");
  document.getElementById("zone").classList.remove("hidden");
}
function useSword() {
  if (inventory.swords <= 0) return;
  inventory.swords--;
  damage++;
  alert("ğŸ—¡ï¸ DaÃ±o aumentado");
  updateInventory();
}
function usePotion() {
  if (inventory.potions <= 0) return;
  inventory.potions--;
  energy = Math.min(energy + 30, 100);
  updateUI();
  updateInventory();
}

/* ===== UI ===== */
function updateUI() {
  document.getElementById("gold").innerText = gold;
  document.getElementById("energy").innerText = energy;
  document.getElementById("enemy").innerText = enemyHP;
  document.getElementById("xp").innerText = xp;
  document.getElementById("xpZone").innerText = xp;
  document.getElementById("level").innerText = level;
  document.getElementById("energyBar").style.width = energy + "%";

  let xpNeed = level * 30;
  document.getElementById("xpBar").style.width =
    Math.min((xp / xpNeed) * 100, 100) + "%";
}
function updateInventory() {
  document.getElementById("swords").innerText = inventory.swords;
  document.getElementById("potions").innerText = inventory.potions;
}

/* ===== IDLE ===== */
setInterval(() => {
  if (energy < 100) {
    energy++;
    updateUI();
  }
}, 5000);
</script>

</body>
</html>
